<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/dist/style.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="path/to/font-awesome/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://raw.githubusercontent.com/desandro/classie/master/classie.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
      integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../main.css" />

    <title>Form</title>
  </head>
  <body class="text-gray-700">
    <!-- start sidebar -->
    <!-- id="menu" -->

    <!-- main section start  -->
    <main class="w-full bg-white lg:min-h-screen">
      <div class="py-2 px-6 items-center">
        <!-- Progress Bar start  -->
        <div
          class="mt-20 lg:mt-0 lg:h-3 h-2 relative max-w-full overflow-hidden lg:mt-20 mt-10"
        >
          <div class="w-full h-full bg-gray-200 absolute"></div>
          <div id="bar" class="h-full bg-[#EC970F] relative w-0"></div>
        </div>
        <!-- Progress Bar end  -->
        <!-- text start  -->
        <div class="flex items-center justify-center">
          <div class="lg:w-[700px] w-[420px] text-center">
            <p class="mt-10">
              Upload a cover photo and at least 7 images of your vehicle. Images
              should visibly display full interior and exterior of the vehicle.
              See our
              <span class="text-[#F3B757] font-bold">listing guide</span> for
              more information.
            </p>
          </div>
        </div>
        <!-- text end  -->

        <!-- upload start  -->
        <section class="grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1">
          <!-- start  -->
          <div class="rounded-lg overflow-hidden items-center">
            <div class="px-4 py-6">
              <div
                id="image-preview"
                class="flex justify-center text-center mb-4 bg-gray-100 h-60 w-70 border-dashed border-2 border-gray-400 rounded-lg cursor-pointer"
              >
                <input
                  id="upload"
                  type="file"
                  class="hidden"
                  accept="image/*"
                />
                <label for="upload" class="cursor-pointer">
                  <p
                    class="font-normal text-sm text-gray-400 md:px-6 lg:py-[59%]"
                  >
                    + Upload Cover Image
                  </p>
                  <span
                    id="filename"
                    class="text-gray-500 bg-gray-200 z-50"
                  ></span>
                </label>
              </div>
            </div>
          </div>
          <!-- end  -->
        </section>
        <!-- upload end  -->
      </div>
    </main>

    <!-- main section end  -->

    <script>
      // Progress Bar start

      let progress = 0;
      let invervalSpeed = 10;
      let incrementSpeed = 1;
      document.addEventListener("DOMContentLoaded", function () {
        let bar = document.getElementById("bar");
        progressInterval = setInterval(function () {
          progress += incrementSpeed;
          bar.style.width = progress + "%";
          if (progress >= 65) {
            clearInterval(progressInterval);
          }
        }, invervalSpeed);
      });
      // Progress Bar end

      //   Upload section start

      const uploadInput = document.getElementById("upload");
      const filenameLabel = document.getElementById("filename");
      const imagePreview = document.getElementById("image-preview");

      let isEventListenerAdded = false;

      uploadInput.addEventListener("change", (event) => {
        const file = event.target.files[0];

        if (file) {
          filenameLabel.textContent = file.name;

          const reader = new FileReader();
          reader.onload = (e) => {
            imagePreview.innerHTML = `<img src="${e.target.result}" class="brightness-50 duration-500 rounded-lg mb-4 h-60 w-70  p-2" alt="Image preview" /> `;
            imagePreview.classList.remove(
              "border-dashed",
              "border-2",
              "border-gray-400"
            );

            if (!isEventListenerAdded) {
              imagePreview.addEventListener("click", () => {
                uploadInput.click();
              });

              isEventListenerAdded = true;
            }
          };
          reader.readAsDataURL(file);
        } else {
          filenameLabel.textContent = "";
          imagePreview.innerHTML = `<div class="rounded-lg flex items-center justify-center text-gray-500">No image preview</div>`;
          imagePreview.classList.add(
            "border-dashed",
            "border-2",
            "border-gray-400"
          );

          imagePreview.removeEventListener("click", () => {
            uploadInput.click();
          });

          isEventListenerAdded = false;
        }
      });

      uploadInput.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      //   Upload section end
    </script>
  </body>
</html>
